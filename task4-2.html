<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dojo課題</title>
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }
      header {
        background-color: #1aaedb;
        border-bottom: #ead963 6px solid;
      }
      .container {
        padding: 16px;
        padding-left: 120px;
      }
      header h1,
      header h2 {
        margin: 0;
        color: #fff;
        line-height: 1;
      }
      header h1 {
        padding: 30px 0 5px 0;
        font-size: 24px;
        border-bottom: 1px dotted #fff;
        font-weight: 500;
      }
      header h2 {
        padding: 6px 0 0 0;
        font-size: 14px;
        font-weight: 400;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <h1>kintone dojo</h1>
        <h2>JavaScript課題③</h2>
      </div>
    </header>
    <main class="container">
      <h1>kintone のライセンス料</h1>
      <div class="user">最低ユーザー数(ライトコース)での利用料金</div>
      <br />
      <input
        type="checkbox"
        class="chk"
        value="250"
      />セキュアオプション（1ユーザー あたり 250円） ×
      <select class="slct">
        <option value="1">1名</option>
        <option value="2">2名</option>
        <option value="3">3名</option>
        <option value="4">4名</option>
        <option value="5">5名</option></select
      ><br />
      <input type="checkbox" class="chk" value="1000" />ディスク増設（10GB
      あたり 1000円） ×
      <select class="slct">
        <option value="1">10GB</option>
        <option value="2">20GB</option>
        <option value="3">30GB</option>
        <option value="4">40GB</option>
        <option value="5">50GB</option></select
      ><br />
      <h3>月額金額：<span id="price">3900</span>円</h3>
      <button id="btn">計算</button>
    </main>
    <script>
      let currentPrice = 3900;
      let switching_one = false;
      let switching_two = false;
      const checkBox_one = document.getElementsByClassName("chk")[0];
      const checkBox_two = document.getElementsByClassName("chk")[1];
      const priceShow = document.getElementById("price");
      const secureOption = document.getElementsByClassName("slct")[0];
      const disc = document.getElementsByClassName("slct")[1];
      let priceDifference = 0;
      console.log(secureOption.value);
      function switchFunc() {
        switch (secureOption.value) {
          case "1":
            priceDifference = 250;
            break;
          case "2":
            priceDifference = 500;
            break;
          case "3":
            priceDifference = 750;
            break;
          case "4":
            priceDifference = 1000;
            break;
          case "5":
            priceDifference = 1250;
            break;
          default:
            priceDifference = 250;
            break;
        }
        return priceDifference;
      }
      function switchFunc2() {
        switch (disc.value) {
          case "1":
            priceDifference_second = 1000;
            break;
          case "2":
            priceDifference_second = 2000;
            break;
          case "3":
            priceDifference_second = 3000;
            break;
          case "4":
            priceDifference_second = 4000;
            break;
          case "5":
            priceDifference_second = 5000;
            break;
          default:
            priceDifference_second = 1000;
            break;
        }
        return priceDifference_second;
      }

      console.log(priceDifference);

      function func2() {
        if (switching_one === true) {
          let changedPrice = currentPrice + priceDifference;
          currentPrice = changedPrice;
          return currentPrice;
        } else {
          let changedPrice = currentPrice - priceDifference;
          currentPrice = changedPrice;
          return currentPrice;
        }
      }

      checkBox_one.onchange = () => {
        if (switching_one === false) {
          // priceShow.innerHTML = changedPrice;
          switching_one = true;
          return switching_one;
          console.log(secureOption.value);
        } else {
          // priceShow.innerHTML = changedPrice;
          switching_one = false;
          return switching_one;
        }
      };

      function func3() {
        if (switching_two === true) {
          let changedPrice = currentPrice + priceDifference_second;
          currentPrice = changedPrice;
          return currentPrice;
        } else {
          let changedPrice = currentPrice - priceDifference_second;
          currentPrice = changedPrice;
          return currentPrice;
        }
      }
      checkBox_two.onchange = () => {
        if (switching_two === false) {
          // priceShow.innerHTML = changedPrice;
          switching_two = true;
          return switching_two;
        } else {
          // priceShow.innerHTML = changedPrice;
          switching_two = false;
          return switching_two;
        }
      };

      document.getElementById("btn").onclick = () => {
        // 最終計算式を書く
        if (switching_one === true) {
          switchFunc();
          func2();
          console.log("Hoge");
        }
        if (switching_two === true) {
          switchFunc2();
          func3();
        }
        priceShow.innerHTML = currentPrice;
        currentPrice = 3900;
        return currentPrice;
      };
    </script>
  </body>
</html>
